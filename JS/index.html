<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Dialogue editor</title>
    <link rel="stylesheet" href="style/main.css" />
    <input id="myFile" type="file" />
    <script async=false defer=false src="JS/core/Utilities.js"></script>
    <script async=false defer=false src="JS/core/Rect.js"></script>
    <script async=false defer=false src="JS/core/ObjectPool.js"></script>
    <script async=false defer=false src="JS/core/Input.js"></script>
    <script async=false defer=false src="JS/core/Core.js"></script>
    <script async=false defer=false src="JS/core/Graphic.js"></script>
    <script async=false defer=false src="JS/core/Button.js"></script>
    <script async=false defer=false src="JS/objects/Define.js"></script>
    <script async=false defer=false src="JS/objects/DialoguesMgr.js"></script>
    <script async=false defer=false src="JS/objects/DialogueBox.js"></script>
    <script async=false defer=false src="JS/objects/Serializer.js"></script>
    <script async=false defer=false src="JS/objects/Scene.js"></script>
    <script async=false defer=false src="JS/core/Main.js"></script>
    <script>
        window.onload = function() {
            document.getElementById('myFile').addEventListener('change', readSingleFile, false);

            function readSingleFile(evt) {
                //Retrieve the first (and only!) File from the FileList object
                var f = evt.target.files[0];

                if (f) {
                    var r = new FileReader();
                    r.onload = function(e) {
                        var contents = e.target.result;
                        document.getElementById('myFile').style.display = 'none';
						DialoguesMgr.init(contents);
                    }
                    r.readAsText(f);
                } else {
                    alert("Failed to load file");
                }
            }
            window.Main.Init();
        }
    </script>
</head>

<body>
    <canvas id="myCanvas"></canvas>
</body>

</html>